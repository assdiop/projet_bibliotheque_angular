<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-12 col-md-8 col-lg-6">
      <div class="card form-card shadow-lg">
        <div class="card-header text-center back-color">
        <h5 class="text-white mb-0">
          Enregistrement Utilisateur
        </h5>
      </div>
    <div class="card-body p-4">
      <form [formGroup]="myForm">
        @if (err) { <div class="alert alert-danger"> <strong>{{err}}</strong> </div> }
        <div class="form-group mb-3">
          <label class="form-label">Nom Utilisateur :</label>
          <input type="text" name="username"
            class="form-control stylish-input" formControlName="username" [(ngModel)]="user.username">
        </div>
        @if(myForm.controls['username'].hasError('required')&& myForm.controls['username'].touched) {
          <span
          class="text-danger"> Nom Utilisateur est obligatoire </span>
        }
        <div class="form-group mb-3">
          <label>email :</label>
          <input type="text" name="email" class="form-control stylish-input" formControlName="email" [(ngModel)]="user.email">
        </div>
        @if (myForm.controls['email'].hasError('required')&& myForm.controls['email'].touched) {
          <span class="text-danger"> email est obligatoire </span>
        }

        @if (myForm.controls['email'].hasError('email')&& myForm.controls['email'].touched) {
          <span class="text-danger"> email non valide </span>
        }

        <div
          class="form-group mb-3"> <label>Mot de passe :</label> <input type="password" name="password"
            formControlName="password" [(ngModel)]="user.password" class="form-control stylish-input"> </div>

        @if(myForm.controls['password'].hasError('required')&& myForm.controls['password'].touched) {
          <span class="text-danger"> mot de passe est obligatoire </span>
        }
        @if (myForm.controls['password'].hasError('minlength')&& myForm.controls['password'].touched) {
          <span class="text-danger"> mot de passe doit contenir au moins 6 caractères </span>
        }

        <div class="form-group mb-3">
            <label>Confirmer Mot de passe :</label> <input type="password" name="confirmPassword"
              formControlName="confirmPassword" class="form-control stylish-input"> </div>

        @if(myForm.controls['confirmPassword'].hasError('required')&& myForm.controls['confirmPassword'].touched) {
          <span class="text-danger"> confirmer mot de passe est obligatoire </span>
        }
        <div>
          @if(myForm.get('confirmPassword')?.touched && myForm.get('confirmPassword')?.value != myForm.get('password')?.value) {
              <span class="text-danger"> Le mot de passe confrmé ne correspond pas au mot de passe tapé </span>
          }
        </div>
        <div class="d-flex justify-content-between mt-4">
        <button
          type="button" [disabled]="myForm.invalid" class="btn-gradient btn btn-success btn-lg px-4 rounded-3 shadow-sm"
          (click)="onRegister()">S'insrire
        </button>
          <p>vous avez un compte? <a routerLink="/login">se connecter </a></p>
        </div>
      </form>
      </div>
    </div>
  </div>
</div>

</div>

